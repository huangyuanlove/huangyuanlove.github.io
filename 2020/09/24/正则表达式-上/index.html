

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://avatars.githubusercontent.com/u/4216225?v=4">
  <link rel="icon" href="https://avatars.githubusercontent.com/u/4216225?v=4">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="HuangYuan_xuan">
  <meta name="keywords" content="正则,正则表达式,Regular Expression,regex">
  
    <meta name="description" content="如果你有一个问题，你想到可以用正则来解决，那么你有两个问题了。 Some people, when confronted with a problem, think “I know,i’ll use regular expressions.” Now they have two problems">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式--上">
<meta property="og:url" content="https://blog.huangyuanlove.com/2020/09/24/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E4%B8%8A/index.html">
<meta property="og:site_name" content="放码过来">
<meta property="og:description" content="如果你有一个问题，你想到可以用正则来解决，那么你有两个问题了。 Some people, when confronted with a problem, think “I know,i’ll use regular expressions.” Now they have two problems">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-09-24T12:05:59.000Z">
<meta property="article:modified_time" content="2023-09-14T02:36:06.336Z">
<meta property="article:author" content="HuangYuan_xuan">
<meta property="article:tag" content="正则">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>正则表达式--上 - 放码过来</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blog.huangyuanlove.com","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":100,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":3},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":"7a06626d17ff9ce19e18d0f08e94d8ba","google":"UA-123314537-1","tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"gtag":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="放码过来" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>放码过来</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="正则表达式--上"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2020-09-24 20:05" pubdate>
          2020年9月24日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.8k 字
        
      </span>
    

    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">正则表达式--上</h1>
            
            
              <div class="markdown-body">
                
                <p>如果你有一个问题，你想到可以用正则来解决，那么你有两个问题了。</p>
<p>Some people, when confronted with a problem, think “I know,i’ll use regular expressions.” Now they have two problems</p>
<span id="more"></span>

<h3 id="写正则过程"><a href="#写正则过程" class="headerlink" title="写正则过程"></a>写正则过程</h3><ol>
<li><p>先分解</p>
<p>这个问题可以分成几个子问题，是否可以用多个正则来完成(密码强度校验，一个校验大小写，一个校验数字标点，一个校验强度)</p>
</li>
<li><p>解决子问题</p>
<p>某个位置上可能有多个字符？那就用字符组。某个位置上可能有多个字符串？那就用多选结构。出现的次数不确定？那就用量词。对出现的位置有要求？那就用锚点锁定位置</p>
</li>
<li><p>套皮</p>
<p>也就是把如何解决子问题转化为正则表达式</p>
</li>
<li><p>调试</p>
<p>复杂⼀点的正则表达式不能⼀次写对，这是很正常的</p>
</li>
</ol>
<p>测试网页：<a target="_blank" rel="noopener" href="https://regex101.com/">https://regex101.com/</a></p>
<h3 id="正则功能s"><a href="#正则功能s" class="headerlink" title="正则功能s"></a>正则功能s</h3>
<pre>
<code class="mermaid" >
graph TB

A(正则功能)
A1(校验数据的有效性)
A2(查找符合要求的文本内容)
A3(对文本进行切割,替换等操作)
A-->A1
A-->A2
A-->A3

</code>
</pre>



<h3 id="正则元字符"><a href="#正则元字符" class="headerlink" title="正则元字符"></a>正则元字符</h3>
<pre>
<code class="mermaid" >
graph LR
A(正则元字符)
A-->B(特殊单字符)
B-->B1(.任意字符)
B-->B2(\d 任意数字\D 任意非数字)
B-->B3(\w 任意字母数字下划线 \W任意非字母谁下划线)
B-->B4(\s任意空白符  \S 任意非空白符)
A-->C(空白符)
C-->C1(\r 回车符)
C-->C2(\n 换行符)
C-->C3(\f 换页符)
C-->C4(\t 制表符)
C-->C5(\v 垂直制表符)
C-->C6(\s 任意空白符)
A-->D(范围)
D-->D1("|或,如ab|bc 代表ab或bc")
D-->D2("[...]多选一，括号中任意单个元素")
D-->D3("[a-z]匹配a到z之间的任意单个元素(按ASCII表，包含a,z)")
D-->D4("[^...]取反，不能是括号中的任意单个元素")
A-->E(量词)
E-->E1(*含义: 0到多次)
E-->E2(+含义: 1到多次)
E-->E3(?含义: 0到1次)
E-->E4("{m}含义: 出现m次")
E-->E5("{m,}含义: 出现至少m次")
E-->E6("{m,n}含义: m到n次")
A-->F(断言)
F-->F1(单词边界)
F-->F2(行的开始/结束)
F-->F3(环视)
</code>
</pre>

<p>示例：</p>
<ol>
<li>匹配某个网络资源：以 http:&#x2F;&#x2F; 或者https:&#x2F;&#x2F; 或者ftp:&#x2F;&#x2F;开头</li>
<li>第一位固定为1，第二位可能是3-9，第三位到第11位可以是任意数字</li>
</ol>
<h3 id="量词与贪婪"><a href="#量词与贪婪" class="headerlink" title="量词与贪婪"></a>量词与贪婪</h3><p>举例：<br>有字符串”aaabb”，有正则表达式”a+”，问有多少个匹配结果<br>有字符串”aaabb”，有正则表达式”a*”，问有多少个匹配结果</p>
<h4 id="贪婪匹配-Greedy"><a href="#贪婪匹配-Greedy" class="headerlink" title="贪婪匹配(Greedy)"></a>贪婪匹配(Greedy)</h4><p>有字符串”aaabb”，有正则表达式”a*”，问有多少个匹配结果 的匹配过程</p>
<table>
<thead>
<tr>
<th>匹配</th>
<th>开始</th>
<th>结束</th>
<th>说明</th>
<th>匹配内容</th>
</tr>
</thead>
<tbody><tr>
<td>第一次</td>
<td>0</td>
<td>3</td>
<td>到第一个字母b发现不满足，输出aaa</td>
<td>aaa</td>
</tr>
<tr>
<td>第二次</td>
<td>3</td>
<td>3</td>
<td>匹配剩下的bb，发现匹配不上，输出空字符串</td>
<td>空字符串</td>
</tr>
<tr>
<td>第三次</td>
<td>4</td>
<td>4</td>
<td>匹配剩下的b，发现匹配不上，输出空字符串</td>
<td>空字符串</td>
</tr>
<tr>
<td>第四次</td>
<td>5</td>
<td>5</td>
<td>匹配剩下空字符串，发现匹配不上，输出空字符串</td>
<td>空字符串</td>
</tr>
</tbody></table>
<h4 id="非贪婪模式-Lazy"><a href="#非贪婪模式-Lazy" class="headerlink" title="非贪婪模式(Lazy)"></a>非贪婪模式(Lazy)</h4><p>有字符串”aaabb”，有正则表达式”a*?”，问有多少个匹配结果<br>9个结果</p>
<p>在python2.7中只能匹配到空串，在java8中只能匹配到空串，  在python3.7.7中可以匹配</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>re.findall(<span class="hljs-string">r&quot;a*?&quot;</span>,<span class="hljs-string">&quot;aaabb&quot;</span>)<br>[<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>]<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>re.findall(<span class="hljs-string">r&quot;a*?&quot;</span>,<span class="hljs-string">&quot;aaabb&quot;</span>)<br>[<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>]<br></code></pre></td></tr></table></figure>



<p>示例：查找双引号之间的单词</p>
<p>字符串如下 “the little cat” is a toy,it looks “a little bad”</p>
<p>贪婪：”.*”</p>
<p>非贪婪:”.*?”</p>
<h4 id="独占模式"><a href="#独占模式" class="headerlink" title="独占模式"></a>独占模式</h4><p>一般不怎么用</p>
<p>示例：</p>
<p>we found “the little cat” is in the hat, we like “the little cat”</p>
<p>其中双引号中的单词看成一个单词，即the little cat 是一个单词</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4>
<pre>
<code class="mermaid" >
graph LR
A("贪婪、非贪婪、独占")
A-->A1(贪婪匹配)
A1-->A11("表示次数的量词，默认是贪婪的<br/>满足要求的情况下，尽可能按最长去匹配")
A1-->A12("回溯：后面匹配不上，会吐出已匹配的再尝试")
A-->A2(非贪婪匹配)
A2-->A21("量词元字符后加?(英文问号),<br/>满足要求的情况下，尽可能按最短去进行匹配")
A2-->A22("回溯：后面匹配不上，会匹配更长再接着尝试")
A-->A3(独占模式)
A3-->A31("量词元字符后加+(英文加号)<br/>满足要求的情况下，尽可能按最长去匹配")
A3-->A32(不会发生回溯,匹配不上即失败)
</code>
</pre>





<h3 id="分组与引用"><a href="#分组与引用" class="headerlink" title="分组与引用"></a>分组与引用</h3><p>匹配身份证号：15位或18位数字</p>
<h4 id="分组与编号"><a href="#分组与编号" class="headerlink" title="分组与编号"></a>分组与编号</h4><p>括号在正则中可以用于分组，被括号括起来的部分“子表达式”会被保存成一个子组。第几个括号就是第几个分组	</p>
<h4 id="不保存子组"><a href="#不保存子组" class="headerlink" title="不保存子组"></a>不保存子组</h4><p>可以在括号里面使用 ?: 不保存子组。</p>
<h4 id="括号嵌套"><a href="#括号嵌套" class="headerlink" title="括号嵌套"></a>括号嵌套</h4><p>我们只需要数左括号（开括号）是第几个，就可以确定是第几个子组</p>
<p>假设时间格式是 2020-05-10 20:23:05 。</p>
<p>((\d{4})-(\d{2})-(\d{2})) ((\d{2}):(\d{2}):(\d{2}))</p>
<p>日期分组编号是 1，时间分组编号是 5，年月日对应的分组编号分别是 2，3，4，时分秒的分组编号分别是 6，7，8。</p>
<h4 id="命名分组"><a href="#命名分组" class="headerlink" title="命名分组"></a>命名分组</h4><p>由于编号得数在第几个位置，后续如果发现正则有问题，改动了括号的个数，还可能导致编号发生变化，因此一些编程语言提供了命名分组（named grouping），这样和数字相比更容易辨识，不容易出错。命名分组的格式为(<code>?P&lt;分组名&gt;正则</code>)。</p>
<h4 id="分组引用"><a href="#分组引用" class="headerlink" title="分组引用"></a>分组引用</h4><p>在知道了分组引用的编号 （number）后，大部分情况下，我们就可以使用 “反斜扛 + 编号”，即 \number 的方式来进行引用</p>
<h4 id="分组引用在查找中使用"><a href="#分组引用在查找中使用" class="headerlink" title="分组引用在查找中使用"></a>分组引用在查找中使用</h4><p>前面出现的单词再次出现：(\w+)\1</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/Adg1Og/4">https://regex101.com/r/Adg1Og/4</a></p>
<h4 id="分组引用在替换中使用"><a href="#分组引用在替换中使用" class="headerlink" title="分组引用在替换中使用"></a>分组引用在替换中使用</h4><p>我们可以使用反向引用，在得到的结果中，去拼出来我们想要的结果</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/Adg1Og/5">https://regex101.com/r/Adg1Og/5</a></p>

<pre>
<code class="mermaid" >
graph LR
A("正则分组")
A-->A1("功能")
A1-->A11("将某部分子表达式看成一个整体，在后续查找或替换引用分组")
A-->A2("分组编号")
A2-->A21(第几个括号就是第几个分组)
A2-->A22("非捕获分组使用(?:正则)")
A2-->A23("括号嵌套只需要看左括号的序号")
A2-->A24("命名分组(?P[名称]正则)")
A-->A3("分组引用")
A3-->A31("查找：查找重复出现的部分")
A3-->A32("替换：对原有内容格式进行改写")
A-->A4("文本编辑")
</code>
</pre>

<h3 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h3><h4 id="不区分大小写模式（Case-Insensitive）"><a href="#不区分大小写模式（Case-Insensitive）" class="headerlink" title="不区分大小写模式（Case-Insensitive）"></a>不区分大小写模式（Case-Insensitive）</h4><p>示例：如要查找单词 cat，我们并不需要关心单词是 CAT、Cat，还是 cat</p>
<p>reg &#x3D; <code>[Cc][Aa][Tt]</code></p>
<p>当我们把模式修饰符放在整个正则前面时，就表示整个正则表达式都是不区分大小写的。模式修饰符是通过 (? 模式标识) 的方式来表示的。  我们只需要把模式修饰符放在对应的正则前，就可以使用指定的模式了。</p>
<p>由于不分大小写的英文是 Case-Insensitive，那么对应的模式标识就是 I 的小写字母 i，所以不区分大小写的 cat 就可以写成 (?i)cat。</p>
<p>text&#x3D;<code>cat\n CAT\nCat</code></p>
<p>我们也可以用它来尝试匹配两个连续出现的 cat，如下图所示，你会发现，即便是第一个 cat 和第二个 cat 大小写不一致，也可以匹配上。</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/x1lg4P/1">https://regex101.com/r/x1lg4P/1</a></p>
<p>如果我们想要前面匹配上的结果，和第二次重复时的大小写一致，那该怎么做呢？我们只需要用括号把**修饰符和正则 cat **部分括起来，加括号相当于作用范围的限定，让不区分大小写只作用于这个括号里的内容</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/x1lg4P/2">https://regex101.com/r/x1lg4P/2</a></p>
<p>需要注意的是，这里正则写成了 ((?i)cat) \1，而不是 ((?i)(cat)) \1。也就是说，我们给修饰符和 cat 整体加了个括号，而原来 cat 部分的括号去掉了。如果 cat 保留原来的括号，即 ((?i)(cat)) \1，这样正则中就会有两个子组，虽然结果也是对的，但这其实没必要</p>
<p>如果用正则匹配，实现部分区分大小写，另一部分不区分大小写，这该如何操作呢？就比如说我现在想要，the cat 中的 the 不区分大小写，cat 区分大小写</p>
<p>也就是 ((?i)the) cat</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/x1lg4P/3">https://regex101.com/r/x1lg4P/3</a></p>
<h4 id="单行模式"><a href="#单行模式" class="headerlink" title="单行模式"></a>单行模式</h4><p>单行的英文表示是 Single Line，单行模式对应的修饰符是 (?s)</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/Adg1Og/1">https://regex101.com/r/Adg1Og/1</a></p>
<h4 id="多行匹配模式（Multiline）"><a href="#多行匹配模式（Multiline）" class="headerlink" title="多行匹配模式（Multiline）"></a>多行匹配模式（Multiline）</h4><p>通常情况下，^匹配整个字符串的开头，$ 匹配整个字符串的结尾。多行匹配模式改变的就是 ^ 和 $ 的匹配行为</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/Adg1Og/2">https://regex101.com/r/Adg1Og/2</a></p>
<p>多行模式的作用在于，使 ^ 和 $ 能匹配上每行的开头或结尾，我们可以使用模式修饰符号 (?m) 来指定这个模式。</p>
<p><a target="_blank" rel="noopener" href="https://regex101.com/r/Adg1Og/3">https://regex101.com/r/Adg1Og/3</a></p>
<h4 id="注释模式（Comment）"><a href="#注释模式（Comment）" class="headerlink" title="注释模式（Comment）"></a>注释模式（Comment）</h4><p>正则中注释模式是使用 (?#comment) 来表示。</p>

<pre>
<code class="mermaid" >
graph LR
A(正则匹配模式<br>Match Mode)
A-->A1(不区分大小写模式<br>Case-Insensitive)
A1-->A11("作用：正则不区分英文字母的大小写")
A1-->A12("修饰符：(?i)")
A-->A2(点号通配模式<br>Dot All)
A2-->A21("作用：英文的点号可以匹配任意字符，包括换行")
A2-->A22("修饰符：(?s)")
A-->A3(多行模式<br>Multiline)
A3-->A31("作用：^或$默认是匹配整个字符串的开头或结尾<br>多行模式使得他们能匹配每行的开头或结尾")
A3-->A32("修饰符：(?m)")
A-->A4(注释模式<br>Comment)
A4-->A41("作用：添加注释")
A4-->A42("修饰符：(?#comment)")
</code>
</pre>

<p>问题：</p>
<p>提取html中head标签中的所有内容</p>
<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>简单来说，断言是指对匹配到的文本位置有要求。比如，去查找一个单词，我们要查找 tom，但其它的单词，比如 tomorrow 中也包含了 tom。</p>
<h4 id="单词边界（Word-Boundary）"><a href="#单词边界（Word-Boundary）" class="headerlink" title="单词边界（Word Boundary）"></a>单词边界（Word Boundary）</h4><p>我们想要把下面文本中的 tom 替换成 jerry。注意一下，在文本中出现了 tomorrow 这个单词，tomorrow 也是以 tom 开头的。</p>
<blockquote>
<p>tom asked me if I would go fishing with him tomorrow.</p>
</blockquote>
<p>利用前面学到的知识，我们如果直接替换，会出现下面这种结果。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">替换前：tom asked me if I would go fishing with him tomorrow.<br>替换后：jerry asked me if I would go fishing with him jerryorrow.<br></code></pre></td></tr></table></figure>

<p>单词的组成一般可以用元字符 \w+ 来表示，\w 包括了大小写字母、下划线和数字（即 [A-Za-z0-9_]）。那如果我们能找出单词的边界，也就是当出现了\w 表示的范围以外的字符，比如引号、空格、标点、换行等这些符号，我们就可以在正则中使用\b 来表示单词的边界。 \b 中的 b 可以理解为是边界（Boundary）这个单词的首字母。</p>
<table>
<thead>
<tr>
<th></th>
<th>tom</th>
<th>\btom</th>
<th>tom\b</th>
<th>\btom\b</th>
</tr>
</thead>
<tbody><tr>
<td>tom</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>tomorrow</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>atom</td>
<td>√</td>
<td>×</td>
<td>√</td>
<td>×</td>
</tr>
<tr>
<td>atomic</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody></table>
<h4 id="行的开始或结束"><a href="#行的开始或结束" class="headerlink" title="行的开始或结束"></a>行的开始或结束</h4><p>可以参考<strong>空白符</strong>和<strong>匹配模式</strong></p>
<h4 id="环视（-Look-Around）"><a href="#环视（-Look-Around）" class="headerlink" title="环视（ Look Around）"></a>环视（ Look Around）</h4><p>比如我们要提取六位数字的邮政编码，不能简单的写<code>\d&#123;6&#125;</code>，这样的话，11位数字的手机号码也能匹配，也就是说，除了文本本身组成符合这 6 位数的规则外，这 6 位数左边或右边都不能是数字。正则是通过环视来解决这个问题的</p>
<table>
<thead>
<tr>
<th>正则</th>
<th>名称</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>(?&lt;=Y)</code></td>
<td>肯定逆序环视<br>positive-lookbehind</td>
<td>左边是Y</td>
<td><code>(?&lt;=\d)th</code>:左边是数字的th，能匹配9th</td>
</tr>
<tr>
<td><code>(?&lt;!Y)</code></td>
<td>否定逆序环视<br>negative-lookbehind</td>
<td>左边不是Y</td>
<td><code>(?&lt;!\d)th</code>:左边不是数字的th，能匹配health</td>
</tr>
<tr>
<td><code>(?=Y)</code></td>
<td>肯定顺序环视<br>positive-lookhead</td>
<td>右边是Y</td>
<td><code>six(?=\d)</code>:右边是数字的siz，能匹配six6</td>
</tr>
<tr>
<td><code>(?!Y)</code></td>
<td>否定逆序环视<br>negative-lookhead</td>
<td>右边不是Y</td>
<td><code>hi(?!\d)</code>:右边不是数字的hi，能匹配high</td>
</tr>
</tbody></table>
<h4 id="环视与子组"><a href="#环视与子组" class="headerlink" title="环视与子组"></a>环视与子组</h4><p>环视中虽然也有括号，但不会保存成子组。保存成子组的一般是匹配到的文本内容，后续用于替换等操作，而环视是表示对文本左右环境的要求，即环视只匹配位置，不匹配文本内容</p>

<pre>
<code class="mermaid" >
graph LR
A(断言)--> A1(单词边界)
A1-->A11(\b匹配单词边界)
A-->A2(行的开始/结束)
A2-->A21("^匹配行的开始<br>多行模式时，可以匹配任意行开头")
A2-->A22("$匹配行的结束<br>多行模式时，可以匹配任意行结尾")
A2-->A23("\A仅匹配整个字符串的开始<br/>不支持多行模式")
A2-->A24("\Z仅匹配整个字符串结束<br/>不支持多行模式")
A-->A3(环视)
A3-->A31("(?=Y)X:匹配前面是Y的X")
A3-->A32("(?!Y)X:匹配前面不是Y的X")
A3-->A33("X(?=Y):匹配后面是Y的X")
A3-->A34("X(?!Y):匹配后面不是Y的X")
</code>
</pre>

<hr>
<p>以上</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%AD%A3%E5%88%99/" class="print-no-link">#正则</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>正则表达式--上</div>
      <div>https://blog.huangyuanlove.com/2020/09/24/正则表达式-上/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>HuangYuan_xuan</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2020年9月24日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              BY HUANG兄
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/11/11/Android%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B/" title="Android打包流程">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Android打包流程</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/08/23/MMKV%E4%B8%8ESharedPreference/" title="MMKV与SharedPreference">
                        <span class="hidden-mobile">MMKV与SharedPreference</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="gitalk-container"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#gitalk-container', function() {
      Fluid.utils.createCssLink('/css/gitalk.css')
      Fluid.utils.createScript('https://lib.baomitu.com/gitalk/1.7.2/gitalk.min.js', function() {
        var options = Object.assign(
          {"clientID":"76c9d0ecf028751aa0d2","clientSecret":"392bc0405dfbdf4928343edef0ef46007f02c7e4","repo":"huangyuanlove.github.io","owner":"huangyuanlove","admin":["huangyuanlove"],"language":"zh-CN","labels":["Gitalk"],"perPage":10,"pagerDirection":"last","distractionFreeMode":false,"createIssueManually":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token"},
          {
            id: '678280fd8722d46146f46b541f852034'
          }
        )
        var gitalk = new Gitalk(options);
        gitalk.render('gitalk-container');
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
